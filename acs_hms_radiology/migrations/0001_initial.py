# Generated by Django 4.2.23 on 2025-07-12 05:55

from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('acs_hms_base', '0001_initial'),
    ]

    operations = [
        migrations.CreateModel(
            name='RadiologyExam',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('exam_code', models.CharField(max_length=20, unique=True)),
                ('exam_name', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True)),
                ('body_part', models.CharField(choices=[('head', 'Head'), ('neck', 'Neck'), ('chest', 'Chest'), ('abdomen', 'Abdomen'), ('pelvis', 'Pelvis'), ('spine', 'Spine'), ('extremities', 'Extremities'), ('cardiac', 'Cardiac'), ('vascular', 'Vascular'), ('breast', 'Breast'), ('other', 'Other')], max_length=20)),
                ('prep_instructions', models.TextField(blank=True)),
                ('fasting_required', models.BooleanField(default=False)),
                ('contrast_required', models.BooleanField(default=False)),
                ('estimated_duration', models.IntegerField(default=30, help_text='Duration in minutes')),
                ('cost', models.DecimalField(decimal_places=2, default=0.0, max_digits=10)),
                ('insurance_code', models.CharField(blank=True, max_length=20)),
                ('common_indications', models.TextField(blank=True)),
                ('contraindications', models.TextField(blank=True)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Radiology Exam',
                'verbose_name_plural': 'Radiology Exams',
                'ordering': ['modality', 'exam_name'],
            },
        ),
        migrations.CreateModel(
            name='RadiologyModality',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('modality_code', models.CharField(choices=[('XR', 'X-Ray'), ('CT', 'CT Scan'), ('MRI', 'MRI'), ('US', 'Ultrasound'), ('NM', 'Nuclear Medicine'), ('PET', 'PET Scan'), ('MAMMO', 'Mammography'), ('FLUORO', 'Fluoroscopy'), ('ANGIO', 'Angiography'), ('DEXA', 'DEXA Scan'), ('OTHER', 'Other')], max_length=10, unique=True)),
                ('description', models.TextField(blank=True)),
                ('manufacturer', models.CharField(blank=True, max_length=100)),
                ('model', models.CharField(blank=True, max_length=100)),
                ('serial_number', models.CharField(blank=True, max_length=100)),
                ('max_resolution', models.CharField(blank=True, max_length=50)),
                ('supported_formats', models.CharField(blank=True, max_length=200)),
                ('contrast_capable', models.BooleanField(default=False)),
                ('location', models.CharField(blank=True, max_length=200)),
                ('room_number', models.CharField(blank=True, max_length=50)),
                ('is_active', models.BooleanField(default=True)),
                ('last_calibration', models.DateTimeField(blank=True, null=True)),
                ('next_calibration', models.DateTimeField(blank=True, null=True)),
                ('maintenance_notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Radiology Modality',
                'verbose_name_plural': 'Radiology Modalities',
                'ordering': ['modality_code', 'name'],
            },
        ),
        migrations.CreateModel(
            name='RadiologyOrder',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('order_id', models.CharField(blank=True, max_length=20, unique=True)),
                ('clinical_indication', models.TextField()),
                ('clinical_history', models.TextField(blank=True)),
                ('provisional_diagnosis', models.TextField(blank=True)),
                ('status', models.CharField(choices=[('ordered', 'Ordered'), ('scheduled', 'Scheduled'), ('in_progress', 'In Progress'), ('completed', 'Completed'), ('cancelled', 'Cancelled'), ('hold', 'Hold')], default='ordered', max_length=20)),
                ('priority', models.CharField(choices=[('routine', 'Routine'), ('urgent', 'Urgent'), ('stat', 'STAT'), ('add_on', 'Add-on')], default='routine', max_length=20)),
                ('ordered_date', models.DateTimeField(auto_now_add=True)),
                ('scheduled_date', models.DateTimeField(blank=True, null=True)),
                ('special_instructions', models.TextField(blank=True)),
                ('contrast_allergies', models.TextField(blank=True)),
                ('pregnancy_status', models.CharField(choices=[('not_applicable', 'Not Applicable'), ('not_pregnant', 'Not Pregnant'), ('pregnant', 'Pregnant'), ('unknown', 'Unknown')], default='not_applicable', max_length=20)),
                ('insurance_authorized', models.BooleanField(default=False)),
                ('authorization_number', models.CharField(blank=True, max_length=100)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('appointment', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='radiology_orders', to='acs_hms_base.appointment')),
                ('exam', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='orders', to='acs_hms_radiology.radiologyexam')),
                ('ordering_physician', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='radiology_orders', to='acs_hms_base.hmsuser')),
                ('patient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='radiology_orders', to='acs_hms_base.patient')),
            ],
            options={
                'verbose_name': 'Radiology Order',
                'verbose_name_plural': 'Radiology Orders',
                'ordering': ['-ordered_date'],
            },
        ),
        migrations.CreateModel(
            name='RadiologySettings',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('default_storage_path', models.CharField(default='/media/radiology/', max_length=500)),
                ('backup_storage_path', models.CharField(blank=True, max_length=500)),
                ('dicom_ae_title', models.CharField(default='HOSPITAL', max_length=16)),
                ('dicom_port', models.IntegerField(default=104)),
                ('pacs_server', models.CharField(blank=True, max_length=200)),
                ('auto_send_reports', models.BooleanField(default=True)),
                ('critical_result_notification', models.BooleanField(default=True)),
                ('image_quality_checks', models.BooleanField(default=True)),
                ('mandatory_peer_review', models.BooleanField(default=False)),
                ('default_appointment_duration', models.IntegerField(default=30)),
                ('max_studies_per_day', models.IntegerField(default=50)),
                ('pregnancy_screening_required', models.BooleanField(default=True)),
                ('contrast_allergy_screening', models.BooleanField(default=True)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Radiology Settings',
                'verbose_name_plural': 'Radiology Settings',
            },
        ),
        migrations.CreateModel(
            name='RadiologyStudy',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('study_id', models.CharField(blank=True, max_length=20, unique=True)),
                ('study_date', models.DateTimeField()),
                ('status', models.CharField(choices=[('scheduled', 'Scheduled'), ('in_progress', 'In Progress'), ('completed', 'Completed'), ('cancelled', 'Cancelled'), ('no_show', 'No Show')], default='scheduled', max_length=20)),
                ('start_time', models.DateTimeField(blank=True, null=True)),
                ('end_time', models.DateTimeField(blank=True, null=True)),
                ('kvp', models.IntegerField(blank=True, null=True)),
                ('mas', models.IntegerField(blank=True, null=True)),
                ('slice_thickness', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('contrast_used', models.BooleanField(default=False)),
                ('contrast_type', models.CharField(blank=True, max_length=100)),
                ('contrast_volume', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('image_quality', models.CharField(blank=True, choices=[('excellent', 'Excellent'), ('good', 'Good'), ('acceptable', 'Acceptable'), ('poor', 'Poor')], max_length=20)),
                ('technical_notes', models.TextField(blank=True)),
                ('number_of_images', models.IntegerField(default=0)),
                ('storage_location', models.CharField(blank=True, max_length=500)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('modality', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='studies', to='acs_hms_radiology.radiologymodality')),
                ('order', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='study', to='acs_hms_radiology.radiologyorder')),
                ('technologist', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='radiology_studies', to='acs_hms_base.hmsuser')),
            ],
            options={
                'verbose_name': 'Radiology Study',
                'verbose_name_plural': 'Radiology Studies',
                'ordering': ['-study_date'],
            },
        ),
        migrations.CreateModel(
            name='RadiologyReport',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('report_id', models.CharField(blank=True, max_length=20, unique=True)),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('in_progress', 'In Progress'), ('completed', 'Completed'), ('revised', 'Revised'), ('addendum', 'Addendum')], default='pending', max_length=20)),
                ('clinical_history', models.TextField(blank=True)),
                ('technique', models.TextField(blank=True)),
                ('findings', models.TextField()),
                ('impression', models.TextField()),
                ('recommendations', models.TextField(blank=True)),
                ('critical_findings', models.BooleanField(default=False)),
                ('critical_communicated', models.BooleanField(default=False)),
                ('communication_method', models.CharField(blank=True, max_length=50)),
                ('communicated_to', models.CharField(blank=True, max_length=200)),
                ('communication_time', models.DateTimeField(blank=True, null=True)),
                ('comparison_studies', models.TextField(blank=True)),
                ('comparison_findings', models.TextField(blank=True)),
                ('dictated_date', models.DateTimeField(blank=True, null=True)),
                ('transcribed_date', models.DateTimeField(blank=True, null=True)),
                ('finalized_date', models.DateTimeField(blank=True, null=True)),
                ('follow_up_required', models.BooleanField(default=False)),
                ('follow_up_timeframe', models.CharField(blank=True, max_length=100)),
                ('follow_up_instructions', models.TextField(blank=True)),
                ('addendum_text', models.TextField(blank=True)),
                ('addendum_date', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('radiologist', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='radiology_reports', to='acs_hms_base.hmsuser')),
                ('study', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='report', to='acs_hms_radiology.radiologystudy')),
            ],
            options={
                'verbose_name': 'Radiology Report',
                'verbose_name_plural': 'Radiology Reports',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='RadiologyProtocol',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('protocol_id', models.CharField(blank=True, max_length=20, unique=True)),
                ('name', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True)),
                ('indication', models.TextField(blank=True)),
                ('kvp_range', models.CharField(blank=True, max_length=50)),
                ('mas_range', models.CharField(blank=True, max_length=50)),
                ('slice_thickness', models.CharField(blank=True, max_length=50)),
                ('reconstruction_algorithm', models.CharField(blank=True, max_length=100)),
                ('contrast_protocol', models.TextField(blank=True)),
                ('contrast_timing', models.CharField(blank=True, max_length=100)),
                ('patient_position', models.CharField(blank=True, max_length=100)),
                ('anatomical_coverage', models.TextField(blank=True)),
                ('patient_instructions', models.TextField(blank=True)),
                ('technologist_instructions', models.TextField(blank=True)),
                ('version', models.CharField(default='1.0', max_length=20)),
                ('effective_date', models.DateField()),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='created_protocols', to='acs_hms_base.hmsuser')),
                ('exam', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='protocols', to='acs_hms_radiology.radiologyexam')),
            ],
            options={
                'verbose_name': 'Radiology Protocol',
                'verbose_name_plural': 'Radiology Protocols',
                'ordering': ['exam', 'name'],
            },
        ),
        migrations.CreateModel(
            name='RadiologyImage',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('image_id', models.CharField(blank=True, max_length=20, unique=True)),
                ('image_number', models.IntegerField()),
                ('series_number', models.IntegerField(default=1)),
                ('image_type', models.CharField(choices=[('DICOM', 'DICOM'), ('JPEG', 'JPEG'), ('PNG', 'PNG'), ('TIFF', 'TIFF'), ('BMP', 'BMP')], default='DICOM', max_length=20)),
                ('file_path', models.CharField(blank=True, max_length=500)),
                ('file_size', models.BigIntegerField(default=0)),
                ('file_format', models.CharField(blank=True, max_length=20)),
                ('matrix_size', models.CharField(blank=True, max_length=50)),
                ('pixel_spacing', models.CharField(blank=True, max_length=50)),
                ('slice_location', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('annotations', models.JSONField(blank=True, default=dict)),
                ('measurements', models.JSONField(blank=True, default=list)),
                ('image_quality', models.CharField(choices=[('diagnostic', 'Diagnostic'), ('limited', 'Limited'), ('non_diagnostic', 'Non-diagnostic')], default='diagnostic', max_length=20)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('study', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='images', to='acs_hms_radiology.radiologystudy')),
            ],
            options={
                'verbose_name': 'Radiology Image',
                'verbose_name_plural': 'Radiology Images',
                'ordering': ['study', 'series_number', 'image_number'],
            },
        ),
        migrations.AddField(
            model_name='radiologyexam',
            name='modality',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='exams', to='acs_hms_radiology.radiologymodality'),
        ),
    ]
